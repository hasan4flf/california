<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
</head>

<body>
    <div class="container">
        <div class="row justify-content-center">
            <div class="col-md-6 mt-5">
                <input type="text" class="form-control form-control-lg rounded-1" name="" id="cityInput"
                    placeholder="ZIP or City">
                <div id="suggestionBox" class="suggestions"></div>
            </div>
        </div>
    </div>

    <script>
        document.getElementById('cityInput').addEventListener('input', function () {
            var inputVal = this.value.toLowerCase();
            if (inputVal.length > 0) {
                fetch('cities.json') // Replace with your actual JSON file URL
                    .then(response => response.json())
                    .then(data => {
                        let matches;
                        if (isNaN(inputVal)) { // If the input is not a number, assume it's a city name
                            // Filter by city name and remove duplicates
                            matches = data.filter((item, index, self) =>
                                self.findIndex(t => t.city === item.city && t.state === item.state) === index &&
                                item.city.toLowerCase().startsWith(inputVal)
                            );
                        } else { // If the input is a number, assume it's a ZIP code
                            // Filter by ZIP code
                            matches = data.filter(item => item.zip.startsWith(inputVal));
                        }

                        displaySuggestions(matches);
                    }).catch(error => console.error('Error fetching the data:', error));
            } else {
                document.getElementById('suggestionBox').style.display = 'none';
            }
        });

        function displaySuggestions(matches) {
            var suggestionBox = document.getElementById('suggestionBox');
            suggestionBox.innerHTML = '';
            matches.forEach(function (item) {
                var div = document.createElement('div');
                // Adjust displayed info based on whether a ZIP code or city name was entered
                var displayText = isNaN(document.getElementById('cityInput').value) ?
                    `${item.city}, ${item.state}` :
                    `${item.city}, ${item.state} ${item.zip}`;
                div.innerHTML = displayText;
                div.addEventListener('click', function () {
                    document.getElementById('cityInput').value = this.innerHTML;
                    suggestionBox.style.display = 'none';
                });
                suggestionBox.appendChild(div);
            });
            suggestionBox.style.display = matches.length > 0 ? 'block' : 'none';
        }
    </script>
</body>

</html>